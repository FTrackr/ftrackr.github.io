<div class="master-container">
    <div class="top-container">
        <div class="progressbar" [style]="{'--progress': stepsDone/totalSteps}"
            [ngClass]="{'soft-hidden': hasLandingPage && stepsDone == 0}"></div>
    </div>
    <div class="middle-container" (keyup)="onKeyPress($event)">
        <!-- the contents of this tag have been emmet-generated -->
        <div class="form-step-container">
            <!-- this is the landing page step, unused otherwise -->
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(0), left100p: stepsDone + 1 == 0, right100p: stepsDone - 1 == 0}"> 
                <ng-content select="[step=0]"></ng-content>
            </div>
            <!-- these steps are the main ones -->
            <!-- there are so many form steps hard-coded here because ng-content doesn't let you use it in a ngFor loop -->
            <!-- I'm sorry for anyone who gets triggered by this -->
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(1),left100p: stepsDone + 1 == 1, right100p: stepsDone - 1 == 1}">
                <ng-content select="[step=1]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(2),left100p: stepsDone + 1 == 2, right100p: stepsDone - 1 == 2}">
                <ng-content select="[step=2]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(3),left100p: stepsDone + 1 == 3, right100p: stepsDone - 1 == 3}">
                <ng-content select="[step=3]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(4),left100p: stepsDone + 1 == 4, right100p: stepsDone - 1 == 4}">
                <ng-content select="[step=4]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(5),left100p: stepsDone + 1 == 5, right100p: stepsDone - 1 == 5}">
                <ng-content select="[step=5]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(6),left100p: stepsDone + 1 == 6, right100p: stepsDone - 1 == 6}">
                <ng-content select="[step=6]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(7),left100p: stepsDone + 1 == 7, right100p: stepsDone - 1 == 7}">
                <ng-content select="[step=7]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(8),left100p: stepsDone + 1 == 8, right100p: stepsDone - 1 == 8}">
                <ng-content select="[step=8]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(9),left100p: stepsDone + 1 == 9, right100p: stepsDone - 1 == 9}">
                <ng-content select="[step=9]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(10),left100p: stepsDone + 1 == 10, right100p: stepsDone - 1 == 10}">
                <ng-content select="[step=10]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(11),left100p: stepsDone + 1 == 11, right100p: stepsDone - 1 == 11}">
                <ng-content select="[step=11]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(12),left100p: stepsDone + 1 == 12, right100p: stepsDone - 1 == 12}">
                <ng-content select="[step=12]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(13),left100p: stepsDone + 1 == 13, right100p: stepsDone - 1 == 13}">
                <ng-content select="[step=13]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(14),left100p: stepsDone + 1 == 14, right100p: stepsDone - 1 == 14}">
                <ng-content select="[step=14]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(15),left100p: stepsDone + 1 == 15, right100p: stepsDone - 1 == 15}">
                <ng-content select="[step=15]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(16),left100p: stepsDone + 1 == 16, right100p: stepsDone - 1 == 16}">
                <ng-content select="[step=16]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(17),left100p: stepsDone + 1 == 17, right100p: stepsDone - 1 == 17}">
                <ng-content select="[step=17]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(18),left100p: stepsDone + 1 == 18, right100p: stepsDone - 1 == 18}">
                <ng-content select="[step=18]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(19),left100p: stepsDone + 1 == 19, right100p: stepsDone - 1 == 19}">
                <ng-content select="[step=19]"></ng-content>
            </div>
            <div class="form-step" [ngClass]="{hidden: !shownSteps.includes(20),left100p: stepsDone + 1 == 20, right100p: stepsDone - 1 == 20}">
                <ng-content select="[step=20]"></ng-content>
            </div>
        </div>
    </div>
    <div class="bottom-container">
        <button
            class="ghost-btn size-M hideable-button"
            [ngClass]="{
                shown: 
                    hasLandingPage && stepsDone > 0 || 
                    !hasLandingPage && stepsDone > 1
            }"
            (click)="goBack($event)"
            >
                Go back
            </button>
        <div class="main-buttons-container">
            <button
                class="ghost-btn size-M hideable-button"
                (click)="goToNext($event)"
                [ngClass]="{shown: stepSkipability.includes(stepsDone) && stepsDone < totalSteps}"
            >Skip</button>
            <button
                class="main-btn size-M"
                (click)="goToNext($event, true)"
                [disabled]="stepCompleteness.length > 0 && !stepCompleteness[stepsDone]"
            >
                {{ mainButtonText }}
            </button>
        </div>
    </div>
</div>